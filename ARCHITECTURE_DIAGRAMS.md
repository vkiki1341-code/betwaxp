# Global Synchronization - Visual Architecture

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BETTING PLATFORM                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚             FRONTEND (React Components)              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚  â”‚  â”‚  Browser 1  â”‚      â”‚  Browser 2  â”‚             â”‚  â”‚
â”‚  â”‚  â”‚ Match Week:1â”‚      â”‚ Match Week:1â”‚  â† BEFORE   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚  â”‚       â”‚                     â”‚                      â”‚  â”‚
â”‚  â”‚       â”œâ”€ Component Mount    â”‚                      â”‚  â”‚
â”‚  â”‚       â”‚  useEffect #1       â”œâ”€ Component Mount     â”‚  â”‚
â”‚  â”‚       â”‚                     â”‚  useEffect #1        â”‚  â”‚
â”‚  â”‚       â”‚  (sync on mount)    â”‚  (sync on mount)     â”‚  â”‚
â”‚  â”‚       â”‚                     â”‚                      â”‚  â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚  â”‚
â”‚  â”‚               (Both call same function)            â”‚  â”‚
â”‚  â”‚                    â”‚                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                      â”‚                                    â”‚
â”‚                      â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      getSystemStateFromSupabase()                    â”‚  â”‚
â”‚  â”‚  Async fetch from database                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                      â”‚                                    â”‚
â”‚                      â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          SUPABASE (Single Source of Truth)           â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â”‚  betting_system_state (1 row, shared by all)        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚ id                    : 1                   â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ current_week          : 1                   â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ current_timeframe_idx : 0                   â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ match_state           : pre-countdown       â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ countdown             : 10                  â”‚     â”‚  â”‚
â”‚  â”‚  â”‚ updated_at            : 2024-01-15 10:00   â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                      â”‚                                    â”‚
â”‚                      â”‚ Both browsers get:               â”‚
â”‚                      â”‚ Week: 1, TimeframeIdx: 0         â”‚
â”‚                      â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  FRONTEND (After Sync)                            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚  â”‚  â”‚  Browser 1  â”‚      â”‚  Browser 2  â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ Match Week:1â”‚      â”‚ Match Week:1â”‚  âœ… SYNCEDâ”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚  + Subscribe to realtime changes                 â”‚   â”‚
â”‚  â”‚  + Listen for 'systemStateChanged' events        â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Week Progression Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  MATCH PROGRESSION                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Match Playing...  Countdown...  Betting Period...         â”‚
â”‚       â†“                 â†“              â†“                    â”‚
â”‚  [90 min]        [10 sec]      [Bets placed]              â”‚
â”‚       â”‚                â”‚              â”‚                    â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                       â”‚                                    â”‚
â”‚                       â–¼                                    â”‚
â”‚              matchState = 'next-countdown'                â”‚
â”‚              countdown = 1                                â”‚
â”‚                       â”‚                                    â”‚
â”‚                       â–¼                                    â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚     â”‚  WEEK PROGRESSION TRIGGERED          â”‚             â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚     â”‚                                      â”‚             â”‚
â”‚     â”‚  nextIdx = currentTimeframeIdx + 1   â”‚             â”‚
â”‚     â”‚  (4 + 1 = 5)                        â”‚             â”‚
â”‚     â”‚                                      â”‚             â”‚
â”‚     â”‚  newState = {                        â”‚             â”‚
â”‚     â”‚    currentWeek: 6,                   â”‚             â”‚
â”‚     â”‚    currentTimeframeIdx: 5,           â”‚             â”‚
â”‚     â”‚    matchState: 'pre-countdown',      â”‚             â”‚
â”‚     â”‚    countdown: 10                     â”‚             â”‚
â”‚     â”‚  }                                   â”‚             â”‚
â”‚     â”‚                                      â”‚             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                   â”‚                                      â”‚
â”‚                   â–¼                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚     â”‚ saveSystemState(newState)            â”‚ â† localStorage
â”‚     â”‚ saveSystemStateToSupabase(newState)  â”‚ â† BROADCAST
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                   â”‚                                      â”‚
â”‚                   â–¼                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚     â”‚  SUPABASE UPDATE                     â”‚             â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤             â”‚
â”‚     â”‚                                      â”‚             â”‚
â”‚     â”‚  UPDATE betting_system_state         â”‚             â”‚
â”‚     â”‚  SET current_timeframe_idx = 5      â”‚             â”‚
â”‚     â”‚  SET current_week = 6                â”‚             â”‚
â”‚     â”‚  WHERE id = 1                       â”‚             â”‚
â”‚     â”‚                                      â”‚             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                   â”‚                                      â”‚
â”‚                   â–¼                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚     â”‚  REALTIME BROADCAST                  â”‚             â”‚
â”‚     â”‚  (Supabase notifies all subscribers) â”‚             â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                   â”‚                                      â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚        â”‚                     â”‚                           â”‚
â”‚        â–¼                     â–¼                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚    â”‚ Browser 1  â”‚        â”‚ Browser 2  â”‚                 â”‚
â”‚    â”‚ receives   â”‚        â”‚ receives   â”‚                 â”‚
â”‚    â”‚ event      â”‚        â”‚ event      â”‚                 â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚           â”‚                     â”‚                        â”‚
â”‚           â”‚  dispatchEvent('systemStateChanged')         â”‚
â”‚           â”‚  {detail: newState}                          â”‚
â”‚           â”‚                     â”‚                        â”‚
â”‚           â–¼                     â–¼                        â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚    â”‚  useEffect #2: Event Listener    â”‚                 â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚    â”‚                                  â”‚                 â”‚
â”‚    â”‚  setCurrentTimeframeIdx(5)       â”‚                 â”‚
â”‚    â”‚  setMatchState('pre-countdown')  â”‚                 â”‚
â”‚    â”‚  setCountdown(10)                â”‚                 â”‚
â”‚    â”‚                                  â”‚                 â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                   â”‚                                      â”‚
â”‚                   â–¼                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚    â”‚  Component Re-render             â”‚                 â”‚
â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚    â”‚                                  â”‚                 â”‚
â”‚    â”‚  Shows: "Match Week 6" âœ…         â”‚                 â”‚
â”‚    â”‚  Both browsers in sync!           â”‚                 â”‚
â”‚    â”‚                                  â”‚                 â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component State Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 COMPONENT LIFECYCLE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Component Mount: BetXPesa()                     â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚                                                  â”‚      â”‚
â”‚  â”‚ State Variables:                                â”‚      â”‚
â”‚  â”‚ â€¢ currentTimeframeIdx  = 0 (initially)         â”‚      â”‚
â”‚  â”‚ â€¢ liveTimeframeIdx     = 0 (initially)         â”‚      â”‚
â”‚  â”‚ â€¢ matchState           = 'pre-countdown'        â”‚      â”‚
â”‚  â”‚ â€¢ countdown            = 10                    â”‚      â”‚
â”‚  â”‚                                                  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                      â”‚                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚         â”‚                            â”‚                     â”‚
â”‚         â–¼                            â–¼                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ useEffect #1 â”‚           â”‚ useEffect #2 â”‚             â”‚
â”‚   â”‚ (Sync Fetch) â”‚           â”‚ (Listener)   â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚          â”‚                          â”‚                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚ getSystemState   â”‚     â”‚ addEventListenerâ”‚           â”‚
â”‚    â”‚ FromSupabase()   â”‚     â”‚ 'systemState    â”‚           â”‚
â”‚    â”‚                  â”‚     â”‚  Changed'       â”‚           â”‚
â”‚    â”‚ 1. Fetch DB      â”‚     â”‚                 â”‚           â”‚
â”‚    â”‚ 2. Subscribe to  â”‚     â”‚ Waits for event â”‚           â”‚
â”‚    â”‚    realtime      â”‚     â”‚                 â”‚           â”‚
â”‚    â”‚ 3. Save to       â”‚     â”‚ When fires:     â”‚           â”‚
â”‚    â”‚    localStorage  â”‚     â”‚ setCurrentTime  â”‚           â”‚
â”‚    â”‚ 4. Dispatch      â”‚     â”‚ frameIdx(new)   â”‚           â”‚
â”‚    â”‚    event         â”‚     â”‚ setMatchState() â”‚           â”‚
â”‚    â”‚                  â”‚     â”‚                 â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚          â”‚                         â”‚                       â”‚
â”‚          â”‚ (fires once on mount)  (fires on each update)  â”‚
â”‚          â”‚                         â”‚                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚    â”‚  Component Re-renders               â”‚                â”‚
â”‚    â”‚  UI shows current week              â”‚                â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                      â–²                                     â”‚
â”‚                      â”‚                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚         â”‚                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚    â”‚ When user clicks timeframe button â”‚                â”‚
â”‚    â”‚ OR week progresses automatically â”‚                â”‚
â”‚    â”‚                                  â”‚                â”‚
â”‚    â”‚ 1. setCurrentTimeframeIdx(new)   â”‚                â”‚
â”‚    â”‚ 2. Component re-renders          â”‚                â”‚
â”‚    â”‚ 3. Shows new week                â”‚                â”‚
â”‚    â”‚                                  â”‚                â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow: Multiple Users

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TIME â†’                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚ T=0s: Both users open site                               â”‚
â”‚                                                            â”‚
â”‚ Browser 1          Database         Browser 2            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚Week: ? â”‚          â”‚W: 1 â”‚         â”‚Week: ? â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜          â”‚
â”‚      â”‚                â”‚                  â”‚               â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚              Call sync function                          â”‚
â”‚               â†“              â†“                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”Œâ”€â”€â”€â”€â”€â”  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚ â”‚Week: 1 â”‚â—„â”€â”€â”€â”˜    â”‚W: 1 â”‚  â””â”€â”€â”€â–ºâ”‚Week: 1 â”‚             â”‚
â”‚ â”‚Synced  â”‚         â””â”€â”€â”€â”€â”€â”˜       â”‚Synced  â”‚             â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚      âœ… IN SYNC                       âœ… IN SYNC        â”‚
â”‚                                                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                            â”‚
â”‚ T=5m: Browser 1 match ends                              â”‚
â”‚                                                            â”‚
â”‚ Browser 1          Database         Browser 2            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚Week: 1 â”‚          â”‚W: 1 â”‚         â”‚Week: 1 â”‚          â”‚
â”‚ â”‚Done    â”‚          â””â”€â”€â”€â”€â”€â”˜         â”‚Playing â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜          â† Update         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚      â”‚              W = 2                â”‚               â”‚
â”‚      â”‚                â†“                  â”‚               â”‚
â”‚      â”‚              â”Œâ”€â”€â”€â”€â”€â”              â”‚               â”‚
â”‚      â”‚              â”‚W: 2 â”‚ â† Broadcast  â”‚               â”‚
â”‚      â”‚              â””â”€â”€â”¬â”€â”€â”˜              â”‚               â”‚
â”‚      â”‚                 â”‚ Event           â”‚               â”‚
â”‚      â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚               â”‚
â”‚      â”‚                 â”‚                 â–¼               â”‚
â”‚      â”‚                 â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚      â”‚                 â”‚          â”‚Week: 1    â”‚         â”‚
â”‚      â”‚                 â”‚          â”‚Playing    â”‚         â”‚
â”‚      â”‚                 â”‚          â”‚Received   â”‚         â”‚
â”‚      â”‚                 â”‚          â”‚event!     â”‚         â”‚
â”‚      â”‚                 â”‚          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚      â”‚                 â”‚               â”‚                 â”‚
â”‚      â”‚                 â”‚ Event         â”‚ useEffect #2   â”‚
â”‚      â”‚                 â”‚ Dispatched    â”‚ setCurrentTime â”‚
â”‚      â”‚                 â”‚ (local)       â”‚ frameIdx(2)    â”‚
â”‚      â”‚                 â”‚               â†“                â”‚
â”‚      â”‚                 â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚      â”‚                 â”‚          â”‚Week: 2     â”‚        â”‚
â”‚      â”‚                 â”‚          â”‚Synced!     â”‚        â”‚
â”‚      â”‚                 â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚      â”‚                 â”‚               âœ… SYNCED        â”‚
â”‚      â”‚                 â”‚                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”‚                                 â”‚
â”‚ â”‚Week: 2    â”‚          â”‚                                 â”‚
â”‚ â”‚Synced!    â”‚          â”‚                                 â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                                 â”‚
â”‚      âœ… SYNCED         â”‚                                 â”‚
â”‚                                                            â”‚
â”‚ BOTH USERS NOW ON WEEK 2 AT SAME TIME âœ…                â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Previous Weeks Display Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          PREVIOUS WEEKS OUTCOMES SECTION              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  Shows when: currentTimeframeIdx > 0                â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“Š Previous Weeks Outcomes                  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚ Week 1   â”‚ Week 2   â”‚ Week 3   â”‚  ...    â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚  â”‚
â”‚  â”‚  â”‚          â”‚          â”‚          â”‚         â”‚  â”‚
â”‚  â”‚  â”‚Matches:5 â”‚Matches:5 â”‚Matches:5 â”‚         â”‚  â”‚
â”‚  â”‚  â”‚Wins: 3   â”‚Wins: 4   â”‚Wins: 2   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚Draws:1   â”‚Draws:0   â”‚Draws:2   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚Loss: 1   â”‚Loss: 1   â”‚Loss: 1   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚          â”‚          â”‚          â”‚         â”‚  â”‚
â”‚  â”‚  â”‚â–¼Details  â”‚â–¼Details  â”‚â–¼Details  â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚                                              â”‚  â”‚
â”‚  â”‚  Data Source:                               â”‚  â”‚
â”‚  â”‚  â”œâ”€ matchHistory array (match results)     â”‚  â”‚
â”‚  â”‚  â”œâ”€ timeSlots array (week times)           â”‚  â”‚
â”‚  â”‚  â”œâ”€ matchupsByTimeframe (matches per week) â”‚  â”‚
â”‚  â”‚  â””â”€ Logic: count wins/draws/losses         â”‚  â”‚
â”‚  â”‚                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                      â”‚
â”‚  Clicking "View Details":                          â”‚
â”‚  â”œâ”€ Sets selectedTimeSlot = timeSlots[weekIdx]    â”‚
â”‚  â”œâ”€ Sets currentTimeframeIdx = weekIdx            â”‚
â”‚  â””â”€ UI shows all matches from that week           â”‚
â”‚                                                      â”‚
â”‚  Matches show:                                     â”‚
â”‚  â”œâ”€ Teams logos and names                         â”‚
â”‚  â”œâ”€ Final score (e.g., "2 - 1")                   â”‚
â”‚  â”œâ”€ Match outcome indicator                       â”‚
â”‚  â””â”€ Betting stats if available                    â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Realtime Subscription Channel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        SUPABASE REALTIME CHANNEL FLOW                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚ Channel Name: 'betting_system_state_changes'       â”‚
â”‚                                                      â”‚
â”‚ Listens for:                                       â”‚
â”‚ â€¢ INSERT events on betting_system_state           â”‚
â”‚ â€¢ UPDATE events on betting_system_state           â”‚
â”‚ â€¢ DELETE events on betting_system_state           â”‚
â”‚                                                      â”‚
â”‚ Payload structure on change:                       â”‚
â”‚ {                                                  â”‚
â”‚   "type": "UPDATE",                               â”‚
â”‚   "event": "UPDATE",                              â”‚
â”‚   "schema": "public",                             â”‚
â”‚   "table": "betting_system_state",                â”‚
â”‚   "commit_timestamp": "2024-01-15T10:30:00Z",    â”‚
â”‚   "new": {                                        â”‚
â”‚     "id": 1,                                      â”‚
â”‚     "current_week": 2,                            â”‚
â”‚     "current_timeframe_idx": 1,                   â”‚
â”‚     "match_state": "pre-countdown",               â”‚
â”‚     "countdown": 10,                              â”‚
â”‚     "updated_at": "2024-01-15T10:30:00.123Z"    â”‚
â”‚   },                                              â”‚
â”‚   "old": {                                        â”‚
â”‚     "id": 1,                                      â”‚
â”‚     "current_week": 1,                            â”‚
â”‚     "current_timeframe_idx": 0,                   â”‚
â”‚     "match_state": "next-countdown",              â”‚
â”‚     "countdown": 1,                               â”‚
â”‚     "updated_at": "2024-01-15T10:25:00.000Z"    â”‚
â”‚   }                                               â”‚
â”‚ }                                                  â”‚
â”‚                                                      â”‚
â”‚ Handler Flow:                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ â”‚ Receive payload from Supabase            â”‚      â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚ â”‚                                          â”‚      â”‚
â”‚ â”‚ 1. Extract payload.new data              â”‚      â”‚
â”‚ â”‚                                          â”‚      â”‚
â”‚ â”‚ 2. Build newState object:                â”‚      â”‚
â”‚ â”‚    {                                     â”‚      â”‚
â”‚ â”‚      currentWeek,                       â”‚      â”‚
â”‚ â”‚      currentTimeframeIdx,                â”‚      â”‚
â”‚ â”‚      matchState,                        â”‚      â”‚
â”‚ â”‚      countdown                          â”‚      â”‚
â”‚ â”‚    }                                    â”‚      â”‚
â”‚ â”‚                                          â”‚      â”‚
â”‚ â”‚ 3. Log: "âœ¨ System state changed..."    â”‚      â”‚
â”‚ â”‚                                          â”‚      â”‚
â”‚ â”‚ 4. Save to localStorage (backup)        â”‚      â”‚
â”‚ â”‚                                          â”‚      â”‚
â”‚ â”‚ 5. Dispatch custom event:                â”‚      â”‚
â”‚ â”‚    window.dispatchEvent(                â”‚      â”‚
â”‚ â”‚      new CustomEvent(                   â”‚      â”‚
â”‚ â”‚        'systemStateChanged',            â”‚      â”‚
â”‚ â”‚        { detail: newState }             â”‚      â”‚
â”‚ â”‚      )                                  â”‚      â”‚
â”‚ â”‚    )                                    â”‚      â”‚
â”‚ â”‚                                          â”‚      â”‚
â”‚ â”‚ 6. useEffect #2 catches event           â”‚      â”‚
â”‚ â”‚    and updates component state          â”‚      â”‚
â”‚ â”‚                                          â”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

These diagrams show how the global synchronization system works at every level, from database schema to user interface.
